# hhplus_3rd_concert
í•­í•´í”ŒëŸ¬ìŠ¤ 3ì£¼ì°¨ ê³¼ì œ : ì½˜ì„œíŠ¸ ì˜ˆë§¤ ì„œë²„ êµ¬ì¶•

<br><br>

## ì„¤ê³„ ë¬¸ì„œ

---

### 1. ë§ˆì¼ìŠ¤í†¤

<img width="1402" alt="á„†á…¡á„‹á…µá†¯á„‰á…³á„á…©á†«" src="https://github.com/vvoohhee/hhplus_3rd_concert/assets/150509394/9b255ff8-d600-4d19-b466-9867820ce06e">

<br><br>

### 2. ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
sequenceDiagram
    title ì½˜ì„œíŠ¸ ì˜ˆì•½ ì „ ëŒ€ê¸°ì—´ ë‹¤ì´ì–´ê·¸ë¨
    actor ì‚¬ìš©ì
    participant ëŒ€ê¸°ì—´
    participant ì²˜ë¦¬ì—´
        
    ì‚¬ìš©ì ->>+ ëŒ€ê¸°ì—´ : ëŒ€ê¸°ì—´ ì§„ì… ìš”ì²­

    ëŒ€ê¸°ì—´ ->>+ ì‚¬ìš©ì : í† í° ë°œê¸‰
    
    loop ëŒ€ê¸°ì—´ ìˆœì„œ/ìƒíƒœ í™•ì¸
        ì‚¬ìš©ì ->>+ ëŒ€ê¸°ì—´ : ëŒ€ê¸°ì—´ ì§„ì… ìš”ì²­
        ëŒ€ê¸°ì—´ ->>- ëŒ€ê¸°ì—´ : ëŒ€ê¸°ì—´ ìˆœì„œ í™•ì¸
        ëŒ€ê¸°ì—´ ->>+ ì‚¬ìš©ì : ì‚¬ìš©ìì˜ ëŒ€ê¸° ìƒíƒœ, ìˆœì„œ ì‘ë‹µ
    end
    
    alt ëŒ€ê¸°ì—´ ì§„ì…í•˜ê³  5ë¶„ ì´ìƒ ê²½ê³¼
        ëŒ€ê¸°ì—´ ->>+ ëŒ€ê¸°ì—´ : í† í° ì‚­ì œ ì²˜ë¦¬
        ëŒ€ê¸°ì—´ ->>+ ì‚¬ìš©ì : ëŒ€ê¸° ì‹œê°„ ë§Œë£Œ ì‘ë‹µ 
    end
    
    break ì‚¬ìš©ìì˜ ìˆœì„œê°€ ë˜ë©´ ì¢…ë£Œ
        ëŒ€ê¸°ì—´ ->>+ ëŒ€ê¸°ì—´ : ëŒ€ê¸° ìƒíƒœ ë³€ê²½ (DONE)
        ëŒ€ê¸°ì—´ ->>+ ì‚¬ìš©ì : ëŒ€ê¸° ìƒíƒœ, ìˆœì„œ ì‘ë‹µ
    end

    ì‚¬ìš©ì ->>+ ì²˜ë¦¬ì—´ : ì²˜ë¦¬ì—´ë¡œ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤.
    
```

```mermaid
sequenceDiagram
    title ìœ ì € ì”ì•¡ ì¡°íšŒ, ì¶©ì „ ë‹¤ì´ì–´ê·¸ë¨
    actor ì‚¬ìš©ì
    participant getapi as GET /api/balance
    participant postapi as POST /api/balance
    participant ì”ì•¡
    participant ìœ ì €

    ì‚¬ìš©ì ->>+ getapi : ì”ì•¡ ì¡°íšŒ API ìš”ì²­
    
    getapi ->>+ ì”ì•¡ : ì‚¬ìš©ìê°€ ë³´ìœ í•œ ì”ì•¡ ìš”ì²­
    
    ì”ì•¡ ->>+ ìœ ì € : ìœ íš¨í•œ ìœ ì €ì¸ì§€ í™•ì¸
    alt ì¼ì¹˜í•˜ëŠ” ìœ ì € ì •ë³´ê°€ ì—†ìŒ
        ìœ ì € ->>+ ì‚¬ìš©ì : ì˜ˆì™¸ ì²˜ë¦¬
    end
    
    ì”ì•¡ ->>+ getapi : ì‚¬ìš©ìê°€ ë³´ìœ í•œ ì”ì•¡ ì‘ë‹µ

    getapi ->>+ ì‚¬ìš©ì : ì”ì•¡ ì¡°íšŒ API ì‘ë‹µ
    
    alt ì‚¬ìš©ìê°€ ì”ì•¡ ì¡°íšŒ í›„ ì¶©ì „ì„ ìš”ì²­
        ì‚¬ìš©ì ->>+ postapi : ì”ì•¡ ì¶©ì „ API ìš”ì²­
    end
    
    postapi ->>+ ì”ì•¡ : ì‚¬ìš©ìê°€ ìš”ì²­í•œ ì”ì•¡ ì¶©ì „ ìš”ì²­

    ì”ì•¡ ->>+ ìœ ì € : ìœ íš¨í•œ ìœ ì €ì¸ì§€ í™•ì¸
    alt ì¼ì¹˜í•˜ëŠ” ìœ ì € ì •ë³´ê°€ ì—†ìŒ
        ìœ ì € ->>+ ì‚¬ìš©ì : ì˜ˆì™¸ ì²˜ë¦¬
    end
    
    ì”ì•¡ ->>+ ì”ì•¡ : ì”ì•¡ ì¶©ì „ ìš”ì²­ì„ ìˆ˜í–‰
    
    ì”ì•¡ ->>+ postapi : ì‚¬ìš©ìê°€ ìš”ì²­í•œ ì”ì•¡ ì¶©ì „ ì‘ë‹µ
    
    postapi ->>+ ì‚¬ìš©ì : ì”ì•¡ ì¶©ì „ API ì‘ë‹µ
```

```mermaid
sequenceDiagram
    title ì½˜ì„œíŠ¸ ì˜ˆì•½ ê°€ëŠ¥ ë‚ ì§œ, ì¢Œì„ ì¡°íšŒ ë‹¤ì´ì–´ê·¸ë¨
    actor ì‚¬ìš©ì
    participant ëŒ€ê¸°ì—´
    participant concertapi as GET /api/concert
    participant seatapi as GET /api/concert/{optionId}/seat
    participant ì½˜ì„œíŠ¸
    participant ì¢Œì„
    
    ì‚¬ìš©ì ->>+ ëŒ€ê¸°ì—´ : ëŒ€ê¸°ì—´ ì§„ì… ìš”ì²­

    ëŒ€ê¸°ì—´ ->>+ ì‚¬ìš©ì : í† í° ë°œê¸‰
    
    loop ëŒ€ê¸°ì—´ ìˆœì„œ/ìƒíƒœ í™•ì¸
        ì‚¬ìš©ì ->>+ ëŒ€ê¸°ì—´ : ëŒ€ê¸°ì—´ ì§„ì… ìš”ì²­
        ëŒ€ê¸°ì—´ ->>- ëŒ€ê¸°ì—´ : ëŒ€ê¸°ì—´ ìˆœì„œ í™•ì¸
        ëŒ€ê¸°ì—´ ->>+ ì‚¬ìš©ì : ì‚¬ìš©ìì˜ ëŒ€ê¸° ìƒíƒœ, ìˆœì„œ ì‘ë‹µ
    end
    break ì‚¬ìš©ìì˜ ìˆœì„œê°€ ë˜ë©´ ì¢…ë£Œ
        ëŒ€ê¸°ì—´ ->>+ ì‚¬ìš©ì : ëŒ€ê¸° ìƒíƒœ, ìˆœì„œ ì‘ë‹µ
    end

    ì‚¬ìš©ì ->>+ concertapi : ì½˜ì„œíŠ¸ ë‚ ì§œ ì¡°íšŒ API ìš”ì²­
    note right of ì‚¬ìš©ì : ì½˜ì„œíŠ¸ì˜ íšŒì°¨ë³„ ì •ë³´ ì¡°íšŒ

    concertapi ->>+ ì½˜ì„œíŠ¸ : ì½˜ì„œíŠ¸ ì •ë³´ ìš”ì²­

    ì½˜ì„œíŠ¸ ->>+ concertapi : ì½˜ì„œíŠ¸ ì •ë³´ ì‘ë‹µ

    concertapi ->>+ ì‚¬ìš©ì : ì½˜ì„œíŠ¸ ë‚ ì§œ ì¡°íšŒ API ì‘ë‹µ
    
    ì‚¬ìš©ì ->>+ seatapi : ì½˜ì„œíŠ¸ íšŒì°¨ë³„ ì¢Œì„ ì¡°íšŒ API ìš”ì²­
    note right of ì‚¬ìš©ì : ì½˜ì„œíŠ¸ íšŒì°¨ë³„ ì¢Œì„ ì •ë³´ ì¡°íšŒ
    
    seatapi ->>+ ì¢Œì„ : ì¢Œì„ ì •ë³´ì™€ ìƒíƒœ ì¡°íšŒ ìš”ì²­
    
    ì¢Œì„ ->>+ seatapi : ì¢Œì„ ì •ë³´ì™€ ìƒíƒœ ì¡°íšŒ ì‘ë‹µ
    
    seatapi ->>+ ì‚¬ìš©ì : ì½˜ì„œíŠ¸ íšŒì°¨ë³„ ì¢Œì„ ì¡°íšŒ API ì‘ë‹µ
    
```

```mermaid
sequenceDiagram
    title ì¢Œì„ ì˜ˆì•½, ê²°ì œ ë‹¤ì´ì–´ê·¸ë¨
    actor ì‚¬ìš©ì
    participant reserveapi as GET /api/concert/reserve
    participant paymentapi as GET /api/concert/payment
    participant ìœ ì €
    participant ì½˜ì„œíŠ¸ì¢Œì„
    participant ê²°ì œ
    participant í‹°ì¼“
    
        ì‚¬ìš©ì ->>+ reserveapi : ì½˜ì„œíŠ¸ ì˜ˆì•½ API ìš”ì²­
        note right of ì‚¬ìš©ì : í—¤ë”ì—ëŠ” ì‚¬ìš©ìì˜ í† í° ì •ë³´ê°€ í¬í•¨ë¨

        reserveapi ->>+ ìœ ì € : í† í°ì˜ ìœ ì € ì •ë³´ ê²€ì¦ ìš”ì²­
        
        alt í† í°ìœ¼ë¡œ ì–»ì€ ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•Šê±°ë‚˜, ìœ íš¨ ì‹œê°„ ë§Œë£Œì¸ ê²½ìš°
            ìœ ì € ->>+ ì‚¬ìš©ì : ì˜ˆì™¸ ì²˜ë¦¬
        end
        
        reserveapi ->>+ ì½˜ì„œíŠ¸ì¢Œì„ : ì½˜ì„œíŠ¸ ì¢Œì„ ì˜ˆì•½ ìš”ì²­
        
        alt ì½˜ì„œíŠ¸ ì¢Œì„ ìƒíƒœê°€ ì˜ˆì•½ì¤‘
            ì½˜ì„œíŠ¸ì¢Œì„ ->>+ reserveapi : ì˜ˆì™¸ ì²˜ë¦¬ ("ì´ë¯¸ ì„ íƒëœ ì¢Œì„ì…ë‹ˆë‹¤") 
        end
        
        ì½˜ì„œíŠ¸ì¢Œì„ ->>+ ì½˜ì„œíŠ¸ì¢Œì„ : ìƒíƒœê°’ "ì˜ˆì•½ì¤‘"ìœ¼ë¡œ ë³€ê²½
        note left of ì½˜ì„œíŠ¸ì¢Œì„ : ë½ì„ ê±¸ì–´ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë³€ê²½í•˜ì§€ ëª»í•˜ë„ë¡ 
        
        ì½˜ì„œíŠ¸ì¢Œì„ ->>+ reserveapi : ì½˜ì„œíŠ¸ ì¢Œì„ ì˜ˆì•½ ì²˜ë¦¬ í›„ ì‘ë‹µ
        
        reserveapi ->>+ ì‚¬ìš©ì : ì½˜ì„œíŠ¸ ì˜ˆì•½ API ì‘ë‹µ
        
        ì‚¬ìš©ì ->>+ paymentapi : ì˜ˆì•½í•œ ì¢Œì„ì— ê²°ì œ ìš”ì²­
        
        alt ì‚¬ìš©ìê°€ ì¢Œì„ ì˜ˆì•½ í›„ ì •í•´ì§„ ì‹œê°„ ì•ˆì— ê²°ì œ ì™„ë£Œí•˜ì§€ ì•ŠìŒ
            ê²°ì œ ->>+ ì‚¬ìš©ì : ì˜ˆì™¸ ì²˜ë¦¬ ("ê²°ì œ ì‹œê°„ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.")
        end
        
        paymentapi ->>+ ê²°ì œ : ê²°ì œ ìš”ì²­
        
        ê²°ì œ ->>+ ê²°ì œ : ê²°ì œ ìš”ì²­ ì²˜ë¦¬
        
        ê²°ì œ ->>+ ìœ ì € : ìœ ì €ì˜ ì”ì•¡ ì—…ë°ì´íŠ¸
        
        ìœ ì € ->>+ í‹°ì¼“ : í‹°ì¼“ ë°ì´í„° ìƒì„±

        í‹°ì¼“ ->>+ ì½˜ì„œíŠ¸ì¢Œì„ : ìƒíƒœê°’ "ì˜ˆì•½ì™„ë£Œ"ë¡œ ë³€ê²½
        
        ì½˜ì„œíŠ¸ì¢Œì„ ->>+ paymentapi : ê²°ì œ ìš”ì²­ ì²˜ë¦¬ í›„ ì‘ë‹µ
        
        paymentapi ->>+ ì‚¬ìš©ì : ê²°ì œ ìš”ì²­ API ì‘ë‹µ
        
```

<br><br>

### ERD

![ERD_á„á…¬á„Œá…©á†¼](https://github.com/vvoohhee/hhplus_3rd_concert/assets/150509394/3c6b1ba9-a0be-4d84-ac30-1324aab15820)

<br><br>
### API ëª…ì„¸ì„œ
ë§í¬ ğŸ”— https://grand-spoonbill-ff4.notion.site/API-8f64568b50ab4b159201d2a863838528?pvs=74

